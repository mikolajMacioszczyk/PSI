import asyncio
import websockets

async def test_websocket():
    # Twój token, pamiętaj, aby użyć poprawnego tokenu
    token = "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI3ZlVNa1AxNUZ6akZ5ZHdLVXFXbElvYVN1VE1KdWc4X1haQnc2STlXb3hVIn0.eyJleHAiOjE3MzgzNTcxODksImlhdCI6MTczODM1Njg4OSwiYXV0aF90aW1lIjoxNzM4MzU2ODQwLCJqdGkiOiIxZWU3ODc3MC1hZjJiLTQwZDktYjZkNi04ZjFmNzM1OGE0NGEiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwMDEvcmVhbG1zL1Nob3AiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiNjg1ZWQyNDgtOTZhMi00ZmY3LWFiYjQtMmE5OTMzNDcxNTgwIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiU2hvcC1CYWNrZW5kIiwic2lkIjoiOTRlMzcwNjYtOGM1OC00N2RmLWJjNDctZTJhZTUzN2NiMjE4IiwiYWNyIjoiMCIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJXYXJlaG91c2VFbXBsb3llZSIsIm9mZmxpbmVfYWNjZXNzIiwiZGVmYXVsdC1yb2xlcy1zaG9wIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6ImVtYWlsIHByb2ZpbGUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJNYWdhIFp5biIsInByZWZlcnJlZF91c2VybmFtZSI6Im1hZ2F6eW5pZXJAdGVzdC5jb20iLCJhcHBSb2xlIjpbIldhcmVob3VzZUVtcGxveWVlIiwib2ZmbGluZV9hY2Nlc3MiLCJkZWZhdWx0LXJvbGVzLXNob3AiLCJ1bWFfYXV0aG9yaXphdGlvbiJdLCJnaXZlbl9uYW1lIjoiTWFnYSIsImZhbWlseV9uYW1lIjoiWnluIiwiZW1haWwiOiJtYWdhenluaWVyQHRlc3QuY29tIn0.tQd97118TMtpKZnm3xzpQfWZH1cIeHsOyAQ28O9qgMqpW3tMT-Q3KBXHcag6NsZ8oZ6Xw0iVPa57he2qVD0Tddmg2JhbWTNJmVCci5lf5gPriSD-0A2EG8rcZ2Zf1XABh52OMa_PMGAA2aLZWy3SHU1UqVihsB6q02w83vHNrH43DQtZpbzKRAEEN1NcQQw7SSItMWu892uOm7oXBmKlODwUrLyCixIlwpyi_Fl_xKOqaWFThdSFuHRUJdEUhF8NMzu7oK--5cvyBjXEINtjbMGpzT2gIj6E23VlUMDpBAl5FgUrbP-IG0t82ad2yb8C2cgIV7gSpiMbWUmR4Vfyog"

    # URL do połączenia WebSocket
    uri = "ws://127.0.0.1:5000/ws/notifications?token=" + token

    async with websockets.connect(uri) as websocket:
        # Możesz wysłać dane (opcjonalne)
        message = "Hello Server!"
        await websocket.send(message)

        # Odbiór odpowiedzi (jeśli serwer odpowiada)
        response = await websocket.recv()
        print(f"Received from server: {response}")

# Uruchomienie testu
asyncio.run(test_websocket())
